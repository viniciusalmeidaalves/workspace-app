{% extends "base.html" %}

{% block title %}Login - {{ config.nome_empresa }} {{ config.APP_NAME }}{% endblock %}

{% block page_content %}
<div class="login-page" 
    {# Removido o 'config.BACKGROUND_IMAGE' aqui, usando o caminho direto com url_for #}
    style="background-image: url('{{ url_for('static', filename='images/login_background.jpg') }}');"> 
    
    <h1 class="login-header">Workspace App</h1>
    <div class="login-box">
        <h2> Log On - {{ config.nome_empresa }} </h2>
        {# AGORA USA O FORMULÁRIO FLASK-WTF #}
        <form class="login-form" method="POST">
            {{ form.hidden_tag() }} {# ESSENCIAL: Proteção CSRF gerada pelo Flask-WTF #}
            <div class="input-group">
                {{ form.username.label }} {# Renderiza <label for="username">User name:</label> #}
                {{ form.username(class="form-control") }} {# Renderiza <input type="text" id="username" name="username" required> #}
                {% for error in form.username.errors %}
                    <span style="color: red; font-size: 0.85em;">{{ error }}</span><br>
                {% endfor %}
            </div>
            <div class="input-group">
                {{ form.password.label }} {# Renderiza <label for="password">Password:</label> #}
                {{ form.password(class="form-control") }} {# Renderiza <input type="password" id="password" name="password" required> #}
                {% for error in form.password.errors %}
                    <span style="color: red; font-size: 0.85em;">{{ error }}</span><br>
                {% endfor %}
            </div>
            <div class="input-group checkbox-group" style="text-align: left;"> {# Novo div para o checkbox #}
                {{ form.remember_me() }} {# Renderiza <input type="checkbox" id="remember_me" name="remember_me"> #}
                {{ form.remember_me.label(style="display: inline; margin-left: 5px; color: #ccc;") }} {# Renderiza <label for="remember_me">Lembrar-me</label> #}
            </div>
            {{ form.submit(class="btn btn-primary") }} {# Renderiza <button type="submit">Log On</button> #}
        </form>
        <div class="register-link">
            <p>Não tem uma conta? <a href="{{ url_for('main.register') }}">Registre-se aqui.</a></p>
        </div>
    </div>
</div>
{% endblock %}